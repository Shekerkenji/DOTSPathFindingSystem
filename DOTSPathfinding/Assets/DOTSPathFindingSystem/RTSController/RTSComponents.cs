using Unity.Entities;
using Unity.Mathematics;

namespace Shek.ECSNavigation
{
    // ?????????????????????????????????????????????????????????????????
    // SELECTION
    // ?????????????????????????????????????????????????????????????????

    /// <summary>
    /// Enableable tag on every selectable unit entity.
    /// Baked via SelectedAuthoring — never added at runtime.
    /// RTSSystem toggles enabled state only (no structural changes).
    /// </summary>
    public struct Selected : IComponentData, IEnableableComponent { }

    // ?????????????????????????????????????????????????????????????????
    // RTS SINGLETON
    // ?????????????????????????????????????????????????????????????????

    /// <summary>
    /// Singleton — all RTS controller config and runtime state.
    /// Baked via RTSConfigAuthoring. Updated every frame by RTSSystem.
    /// </summary>
    public struct RTSConfig : IComponentData
    {
        // ?? Config (set at bake time, not changed at runtime) ??
        public float PanSpeed;
        public float RotateSpeed;
        public float ZoomSpeed;
        public float MinHeight;
        public float MaxHeight;
        public float CameraTiltDeg;
        public float ClickPickRadiusPx;
        public float FormationSpacing;
        public int GroundLayerMask;

        // ?? Camera runtime state ??
        public float3 PivotPosition;
        public float CurrentYaw;
        public float CurrentHeight;

        // ?? Input snapshot (written each frame from UnityEngine.Input) ??
        public float2 PanInput;
        public float RotateInput;
        public float ZoomInput;
        public float2 MousePositionPx;
        public bool LeftDown;
        public bool LeftHeld;
        public bool LeftUp;
        public bool RightDown;
        public bool ShiftHeld;
        public bool EscapeDown;

        // ?? Drag-select state ??
        public bool IsDragging;
        public float2 DragStartPx;

        // ?? Pending move order ??
        public bool MoveOrderPending;
        public float3 MoveOrderDestination;
    }
}